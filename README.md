# Задача "Исследование JVM через VisualVM"

## Описание
Предлагаем вам изучить использование памяти через VisualVM при загрузке новых классов и создании новых объектов

## Инструкция
Скачайте и установите утилиту [VisualVM](https://visualvm.github.io/download.html).  
Запульте и запустите проект [отсюда](https://github.com/Arsennikum/jvm-visualvm-experience).  

## Ответ

Сначала программа спит 30 секунд.

Загрузка классов ленивая, поэтому классы не загружаются пока мы к ним не обратимся.

Затем начинается загрузка классов из зависимостей в область Metaspace:

![Class loader](https://github.com/NataliaSafiullina/HW_JVM-VisualVM/raw/main/src/classes.png)

Затем начинается создание объектов, объекты сохраняются в области Heap:

![Heap](https://github.com/NataliaSafiullina/HW_JVM-VisualVM/raw/main/src/objects.png)

Отметим на таймлайне все сообщения, которые программа вывела в консоль.

Как видно скачки в повышении использования области Metaspace связаны с загрузкой классов очередной зависимости.
Мы видим три скачка, мы загрузили классы трех зависимостей.
Между отрезками роста использования области Metaspace расположены "плато" ровные участки графика, 
т.е. когда программа спала.

![Class loader](https://github.com/NataliaSafiullina/HW_JVM-VisualVM/raw/main/src/log_metaspace.png)

Аналогично с графиком использования "кучи". Программа трижды запускает создание 5 000 000 объектов.
Добавляет их в коллекцию List. Изначально было выделено 132 Мб. 
При создании первого блока объектов системе пришлось увеличить размер "кучи".
При запуске остальных двух блоков создания объектов, мы видим рост и выделенной памяти и используемой памяти.

![Heap](https://github.com/NataliaSafiullina/HW_JVM-VisualVM/raw/main/src/log_heap.png)

Сборщик мусора ни разу не успел отработать.



